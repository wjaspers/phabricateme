<!DOCTYPE HTML>
<html>
<head>
	<title>PhabricateMe : Options</title>
	<script src="/oauth2/oauth2.js"></script> 
	<script src="/js/uri.js"></script>
	<script src="/js/phabricateme.js"></script>
 	<script src="/js/options.js"></script>

	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="/css/common.css" />
	<link rel="stylesheet" type="text/css" href="/css/options.css" />
</head>
<body>
  <div id="main">
    	<h1>PHABRICATE ME</h1>
	<form id="configuration">
		<!-- GENERAL settings -->
    		<div class="form-element domain">
			<label for="domain">Domain</label>
			<p data-for="domain">The domain name of the phabricator instance you want to access.</p>
			<input type="url" 
				class="input" 
				size="150" 
				name="domain"
				maxlength="2038"
				id="domain" 
				required
				placeholder="https://secure.phabricator.com" 
			/>
		</div>

		<fieldset class="clearfix" id="authorizationConfig">
			<legend>Client Authorization</legend>
			<div class="form-element popup checkbox">
				<input type="checkbox" 
					class="inline"
					name="authorization[enabled]"
					id="authorizationEnabled"
					value="1" 
				/>
				<label for="authorizationEnabled">Enable OAuth Adapter</label>
			</div>

			<div class="client-options clearfix hide" id="authorizationOptions">
				<p>This information is required to read or update information within your Phabricator instance. If this data is not supplied, notifications, feeds, etc, will not work.</p>
				<p>Not sure what any of this is? Ask your Phabricator administrator, or you can attempt to <a class="preview" href="https://secure.phabricator.com/oauthserver/clientauthorization/">create your own application configuration</a>.</p>
				<div class="form-element clientName">
					<label for="clientName">Client Name</label>
					<p data-for="clientName">The name you want to give this chrome extension in your Phabricator instance. The OAuth API requires this to access objects via the Conduit API.</p>
					<input type="text" 
						name="authorization[clientName]"
						id="clientName"
						placeholder="PhabricateMe" 
					/>
				</div>

				<div class="form-element clientId">
					<label for="clientId">Client ID</label>
					<p data-for="clientId">The PH-ID generated for your client.</p>
					<input type="text" 
						name="authorization[clientId]" 
						id="clientId" 
						placeholder="abc123" 
					/>
				</div>

				<div class="form-element clientSecret">
					<label for="clientSecret">Client Secret</label>
					<p data-for="clientSecret">The OAuth secret token generated for your client.</p>
					<input type="text" 
						name="authorization[clientSecret]" 
						id="clientSecret" 
						placeholder="abc123" 
					/>
				</div>
				<div class="form-element updateInterval">
					<label for="updateInterval">Update Interval</label>
					<p data-for="updateInterval">How frequently (in seconds) to ask Phabricator for information. There is a 5 second minimum, so phabricator instances aren't getting pummeled with requests.</p>
					<input class="input" 
						type="number" 
						name="authorization[updateInterval]" 
						id="updateInterval" 
						min="5" 
						max="180" pattern="[0-9]{1,3}" 
						required 
						placeholder="5" 
						value="5" 
					/>
				</div>
				<button id="authorize">Authorize Now</button>
			</div>
		</fieldset>

		<!-- LINKS to display in the popup -->
		<fieldset class="clearfix" id="popupConfig">
			<legend>Popup Configuration</legend>
			<div class="form-element popup checkbox">
				<input type="checkbox" 
					class="inline"
					name="popup[enabled]"
					id="popupEnabled"
					value="1" 
				/>
				<label for="popupEnabled">Enable Popup</label>
			</div>
			<div class="form-element shortcuts checkbox hide" id="popupOptions">
				<input type="checkbox" 
					class="inline" 
					name="popup[shortcuts]" 
					id="shortcutsEnabled" 
					value="1"
				 />
				<label for="shortcutsEnabled">Shortcuts</label>
				<p data-for="shortcutsEnabled">If enabled, shortcuts are displayed in the popup, when activated.</p>

				<div class="form-element shortcuts-options hide" id="shortcutsOptions">
					<!-- shortcuts options are generated -->
				</div>
			</div>
		</fieldset>

		<!-- OMNIBOX settings
		/* This section needs work */
		<fieldset class="clearfix" id="omniboxConfig">
			<legend>Omnibox</legend>
			<div class="form-element omnibox checkbox clearfix">
				<input type="checkbox" 
					class="inline"
					name="omnibox[enabled]"
					id="omnibox"
					value="0"
				/>
				<label for="omnibox">Omnibox Helpers</label>
				<p data-for="omnibox">If enabled, omnibox helpers can provide shortcuts to objects within your Phabricator instance.</p>
			</div>

			<div class="omnibox-options hide">
				<div class="form-element omnibox-herald">
					<input type="checkbox" 
						name="omnibox[herald]"
						id="omnibox-herald"
						value="1"
					/>
					<label for="omnibox-herald">Herald Locator</label>
					<p data-for="omnibox-herald">If enabled, commit or herald searches via the omnibox try to jump directly to the object in your Phabricator instance.</p>
				</div>
			</div>
		</fieldset>
		-->

		<div class="form-actions" id="formActions">
			<button id="save" class="btn btn-primary left">Save Settings</button>
			<button id="terminate" class="btn btn-danger right">Wipe Extension Data</button>
		</div>
    </form>
  </div>

  <div class="footer">
	<a class="btn btn-mini" href="/pages/credits.htm" target="_blank">Credits</a>
  </div>
</script>
</body>
</html>
